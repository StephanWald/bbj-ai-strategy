---
phase: 34-ide-integration
plan: 02
type: execute
wave: 2
depends_on: [34-01]
files_modified: [docs/04-ide-integration/index.md]
autonomous: true

must_haves:
  truths:
    - "bbj-language-server + AI integration is positioned as a close next milestone, not distant future"
    - "Langium AI is contextualized as natural extension of existing Langium architecture, not an alternative"
    - "Status block uses Phase 32 terminology: operational / active research / planned"
    - "Chapter reads as a cohesive narrative: problem -> pragmatic now (Continue.dev) -> strategic future (language server)"
    - "No prohibited terminology anywhere in the chapter"
    - "Critical anchor #compiler-validation-ground-truth-syntax-checking is preserved"
  artifacts:
    - path: "docs/04-ide-integration/index.md"
      provides: "Complete Chapter 4 rewrite with all sections repositioned and consistent"
      contains: "Where Things Stand"
  key_links:
    - from: "docs/04-ide-integration/index.md"
      to: "docs/07-implementation-roadmap/index.md"
      via: "Anchor link to compiler validation section"
      pattern: "compiler-validation-ground-truth-syntax-checking"
    - from: "docs/04-ide-integration/index.md"
      to: "docs/03-fine-tuning/index.md"
      via: "Cross-references for training data and model selection"
      pattern: "/docs/fine-tuning"
---

<objective>
Complete the Chapter 4 rewrite by repositioning language server sections, expanding ghost text as a close next milestone, recontextualizing Langium AI, replacing the status block, and running a full-file consistency pass with build verification.

Purpose: Plan 01 handled the "pragmatic now" (Continue.dev, Copilot contrast). This plan handles the "strategic future" (language server, ghost text, Langium AI) and ensures the full chapter reads as a cohesive narrative with consistent terminology throughout.

Output: Complete, polished Chapter 4 with all sections in their final positions, status block using Phase 32 conventions, no prohibited terminology, and clean build.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-ide-integration/34-RESEARCH.md
@.planning/phases/34-ide-integration/34-CONTEXT.md
@.planning/phases/34-ide-integration/34-01-SUMMARY.md
@docs/04-ide-integration/index.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reposition language server sections + expand ghost text + recontextualize Langium AI</name>
  <files>docs/04-ide-integration/index.md</files>
  <action>
Reposition and update the language server sections to flow naturally after the Continue.dev and Copilot sections. The final section order per user decisions should be:

1. TL;DR (done in Plan 01)
2. Problem-focused intro (done in Plan 01)
3. Continue.dev section (done in Plan 01)
4. Why Not Copilot + comparison table (done in Plan 01)
5. **The Foundation: bbj-language-server** (reposition from current location)
6. **Two Completion Mechanisms** (keep with language server)
7. **Ghost Text Architecture** (expand)
8. **Generation-Aware Completion** (keep as-is)
9. **Compiler Validation** (keep as-is, standalone section)
10. **LSP 3.18** (keep)
11. **Langium AI** (recontextualize -- own section)
12. Current Status (Task 2)
13. What Comes Next (Task 2)

**Specific changes:**

**A. Reposition "## The Foundation: bbj-language-server"** after the Copilot section.
- Update commit count from "450+" to "508" (per research)
- Remove "shipped" from "This is not a future plan. It is a shipped, maintained product" -- replace with "This is not a future plan. It is an operational, actively maintained product"
- Remove "production-grade features" -- replace with "full-featured" or similar
- Keep the Langium subsection ("Why Langium Matters") as-is -- still accurate
- Frame the section transition: Continue.dev delivers the model to the IDE, but the language server is what gives BBj-specific intelligence. These are complementary, not competing strategies.

**B. Keep "## Two Completion Mechanisms" with the language server.** Minor update:
- In the Decision callout Status line: "Popup completion is operational via the bbj-language-server. Ghost text completion is planned." (replace "shipped" with "operational")

**C. Expand Ghost Text Architecture subsection.**
- Frame ghost text implementation as "one of the closest next milestones" per user decision
- Note that bbj-language-server has both VS Code (`bbj-vscode`) and IntelliJ (`bbj-intellij`) extensions in the repo -- this infrastructure already exists
- Mention that Continue.dev's autocomplete already uses InlineCompletionItemProvider (the same API) -- so the pattern is proven in practice
- Keep the existing TypeScript code example and Mermaid diagram -- they are accurate and well-written
- Add a brief note framing this as "extending the existing language server" rather than "building from scratch"

**D. Keep "## Generation-Aware Completion" as-is.** The content is still accurate and relevant. No changes needed.

**E. Keep "## Compiler Validation: Ground-Truth Syntax Checking" as-is.** Per user decision: "bbjcpl compiler validation keeps its own standalone section (it's a differentiator)."
- CRITICAL: Preserve the heading exactly as "## Compiler Validation: Ground-Truth Syntax Checking" to maintain the anchor `#compiler-validation-ground-truth-syntax-checking` that Chapter 7 links to.
- Only change: in the Decision callout, update Status if it uses prohibited terms. Current: "Concept validated. bbjcpltool v1 proof-of-concept demonstrates..." -- this is fine, keep it. Check for "shipped" or "production" in the section.

**F. Keep "## LSP 3.18: Server-Side Inline Completion".**
- Claude's discretion on framing: soften slightly to "potential migration path" per research recommendation. The section is factually correct but frame as "If the bbj-language-server implements textDocument/inlineCompletion..." rather than implying it is the definite plan.
- Keep the Decision callout, update Status line if it uses prohibited terms.

**G. Create "## Langium AI: Extending the Language Server"** (recontextualized from the old "Alternative Architectures > Langium AI" subsection).
- Remove "Alternative Architectures" framing entirely
- Lead with: the bbj-language-server is built on Langium. Langium AI tools are the natural extension of this architecture -- not an alternative to it.
- Update repo reference: TypeFox/langium-ai is archived (Sept 2025), project moved to eclipse-langium/langium-ai under the Eclipse Langium umbrella
- Positive framing per user decision: both Langium and langium-ai are now under Eclipse Langium, suggesting version alignment is a matter of when, not if
- Keep the three capabilities: evaluation pipelines, DSL-aware splitting, constraint generation
- Note version gap factually: "v0.0.2 targets Langium 3.4.x; the bbj-language-server is built on Langium 4.x"
- Do NOT use dismissive language ("incompatible", "obsolete", "abandoned")
- Frame as: "natural evolution of the existing architecture" per user decision

**Framing note (per user decision):** Continue.dev and language server are "parallel strategies" -- Continue.dev for model delivery, language server for BBj-specific intelligence. They complement, not compete. The transition from Continue.dev sections to language server sections should make this complementary relationship clear.
  </action>
  <verify>
1. Read the full file and verify section order matches the target structure
2. Confirm "## Compiler Validation: Ground-Truth Syntax Checking" heading is preserved exactly (anchor integrity)
3. Grep for "450+" -- should be replaced with "508"
4. Grep for "shipped" in the file -- should not appear (replaced with "operational")
5. Grep for "production-grade" -- should not appear
6. Grep for "Alternative Architectures" -- should not appear
7. Confirm Langium AI section references eclipse-langium/langium-ai (not TypeFox/langium-ai)
8. Confirm ghost text section mentions "close next milestone" framing
  </verify>
  <done>
- Language server sections positioned after Continue.dev/Copilot sections
- Ghost text framed as close next milestone with VS Code + IntelliJ extension infrastructure noted
- Langium AI recontextualized as natural Langium extension under Eclipse umbrella
- Compiler validation section heading preserved for anchor integrity
- All commit counts updated (508)
- No "shipped", "production-grade", or "Alternative Architectures" in the file
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace status block + update What Comes Next + full-file consistency pass + build verification</name>
  <files>docs/04-ide-integration/index.md</files>
  <action>
Final cleanup: replace the status block, update the closing section, do a full-file prohibited terminology sweep, and verify the build.

**1. Replace "## Current Status" block** (lines ~499-508 in original) with Phase 32 convention format:

```markdown
:::note[Where Things Stand]
- **Operational:** bbj-language-server v0.5.0 -- syntax highlighting, code completion, diagnostics, formatting, and code execution on the [VS Code Marketplace](https://marketplace.visualstudio.com/). 508 commits, 13 contributors.
- **Operational:** bbjcpltool v1 -- compiler-in-the-loop validation demonstrated. LLMs interpret `bbjcpl` error messages and self-correct.
- **Active research:** Continue.dev evaluation as primary IDE integration path for fine-tuned BBj model delivery (chat + tab completion).
- **Active research:** Copilot BYOK integration (chat only -- inline completions not supported for BYOK models).
- **Planned:** Ghost text completion via `InlineCompletionItemProvider` with compiler validation in the pipeline.
- **Planned:** FIM fine-tuning on BBj source code for tab completion support.
- **Planned:** Generation detection in the Langium parser, semantic context API for enriched prompts.
- **Planned:** Migration to LSP 3.18 `textDocument/inlineCompletion` for multi-editor support.
:::
```

Use exactly this format -- bullet points with bold status labels, no dates, no "shipped"/"in progress".

**2. Update "## What Comes Next"** closing section.
- Update cross-references to reflect the progress-focused tone
- Ensure it references the fine-tuning chapter (Chapter 3) for model preparation
- Mention that the path from current state to AI-powered completion is incremental: Continue.dev provides immediate model delivery, while the language server extensions add BBj-specific intelligence layer by layer
- Keep cross-references to other chapters (RAG Database, Documentation Chat, Strategic Architecture, Implementation Roadmap)

**3. Full-file prohibited terminology grep.** Search the ENTIRE file for:
- "shipped" -> replace with "operational" or "available"
- "production" (check context -- "production-grade" is prohibited, but "production environments" in a technical context about customer deployments may be legitimate per Phase 32 precedent)
- "deployed" as final state -> replace with "operational"
- "in progress" -> replace with "active research" or "operational for internal exploration"

**4. Tone consistency pass.** Scan the entire file for:
- Progress-focused tone per user decision: "here's what we've built, here's the pragmatic next step, here's where it's all heading"
- Continue.dev and language server described as complementary parallel strategies throughout
- No section that frames Continue.dev negatively or as "less than" the custom solution

**5. Build verification.** Run `npm run build` from the project root to verify:
- No broken Markdown syntax
- No broken Mermaid diagrams
- No broken internal links (especially the `#compiler-validation-ground-truth-syntax-checking` anchor)
- Clean build with zero warnings

**6. Cross-reference check.** Verify these incoming links still work:
- `/docs/ide-integration` (general chapter link -- always works if file exists)
- `#compiler-validation-ground-truth-syntax-checking` (Chapter 7 links to this)
  </action>
  <verify>
1. Grep for "Where Things Stand" -- should appear exactly once in the status block
2. Grep for "shipped" -- should return zero matches in the entire file
3. Grep for "in progress" (case insensitive) -- should return zero matches
4. Grep for "production-grade" -- should return zero matches
5. Run `npm run build` -- should complete with zero errors
6. Verify the anchor by running: `grep "^## Compiler Validation: Ground-Truth Syntax Checking$" docs/04-ide-integration/index.md` -- should match exactly once
7. Read the status block and confirm it uses exactly: Operational / Active research / Planned (Phase 32 conventions)
  </verify>
  <done>
- Status block uses Phase 32 terminology consistently
- What Comes Next updated with progress-focused tone
- Zero prohibited terms in the entire file
- `npm run build` passes cleanly
- All cross-references and anchors intact
- Chapter reads as cohesive narrative from problem through pragmatic now to strategic future
  </done>
</task>

</tasks>

<verification>
After both tasks complete, the full Chapter 4 must satisfy:

1. **Structure:** Problem intro -> Continue.dev (chat + tab + FIM gap) -> Why Not Copilot (comparison table) -> Language server foundation -> Two mechanisms -> Ghost text (close next milestone) -> Generation-aware -> Compiler validation -> LSP 3.18 -> Langium AI -> Status -> What Comes Next

2. **Requirements:**
   - IDE-01: Continue.dev presented as primary path with concrete config.yaml for Ollama
   - IDE-02: Copilot BYOK limitations clearly stated, Enterprise public preview noted
   - IDE-03: bbj-language-server + AI positioned as close next milestone, not near-term but parallel strategy
   - IDE-04: FIM training gap explained -- tab completion requires FIM-trained model, current ChatML is instruction-only

3. **Consistency:**
   - No prohibited terminology anywhere in the file
   - Status block uses Phase 32 conventions
   - All cross-references intact
   - `npm run build` clean

4. **Anchor integrity:** `#compiler-validation-ground-truth-syntax-checking` preserved
</verification>

<success_criteria>
- All four IDE requirements (IDE-01 through IDE-04) fully met
- Chapter builds cleanly with `npm run build`
- Status block uses established Phase 32 terminology
- No prohibited terms in entire file
- Critical anchor preserved for Chapter 7 cross-reference
- Cohesive narrative arc: problem -> pragmatic now -> strategic future
</success_criteria>

<output>
After completion, create `.planning/phases/34-ide-integration/34-02-SUMMARY.md`
</output>
