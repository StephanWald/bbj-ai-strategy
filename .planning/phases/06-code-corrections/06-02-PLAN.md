---
phase: 06-code-corrections
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/03-fine-tuning/index.md
  - docs/04-ide-integration/index.md
  - docs/05-documentation-chat/index.md
  - docs/06-rag-database/index.md
  - docs/02-strategic-architecture/index.md
autonomous: true

must_haves:
  truths:
    - "A reader studying Chapter 5 AI response examples sees correct Visual PRO/5 mnemonic syntax, not fabricated WINDOW CREATE verbs"
    - "A reader comparing generation tagging tables in Chapters 3 and 6 sees consistent, correct Visual PRO/5 mnemonic syntax"
    - "A developer studying IDE integration in Chapter 4 finds correct Visual PRO/5 detection patterns"
    - "A reader examining RAG metadata examples in Chapter 6 sees correct Visual PRO/5 syntax in JSON samples"
    - "A reader encounters consistent Visual PRO/5 descriptions across all chapters (2 through 7)"
    - "Existing correct code (Chapter 3 OrderForm, Chapter 5 modern BBj) is unchanged and verified"
  artifacts:
    - path: "docs/05-documentation-chat/index.md"
      provides: "Chapter 5 with corrected AI response examples"
      contains: "print (sysgui)'window'"
    - path: "docs/03-fine-tuning/index.md"
      provides: "Chapter 3 with corrected generation table"
      contains: "PRINT (sysgui)'WINDOW'"
    - path: "docs/06-rag-database/index.md"
      provides: "Chapter 6 with corrected generation table and JSON examples"
      contains: "PRINT (sysgui)'WINDOW'"
    - path: "docs/04-ide-integration/index.md"
      provides: "Chapter 4 with corrected detection code and descriptions"
      contains: "PRINT (sysgui)'WINDOW'"
    - path: "docs/02-strategic-architecture/index.md"
      provides: "Chapter 2 with corrected Visual PRO/5 description"
      contains: "PRINT (sysgui)"
  key_links:
    - from: "all chapter files"
      to: "GuideToGuiProgrammingInBBj.pdf patterns"
      via: "consistent Visual PRO/5 syntax across all chapters"
      pattern: "PRINT \\(sysgui\\)'WINDOW'"
---

<objective>
Audit and correct all BBj code samples and Visual PRO/5 references across Chapters 2, 3, 4, 5, 6, and 7 against the authoritative PDF reference.

Purpose: The hallucinated `WINDOW CREATE` syntax was not limited to Chapter 1. It propagated into generation tagging tables (Chapters 3, 6), AI response examples (Chapter 5), detection code (Chapter 4), and narrative descriptions (Chapter 2). Every reference to Visual PRO/5 syntax must be consistent with the corrected patterns. Additionally, existing correct code (Chapter 3 OrderForm, Chapter 5 modern BBj) must be verified as correct.

Output: All chapters consistently use correct BBj syntax. Correct code blocks are verified. Hallucinated references are replaced.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@docs/05-documentation-chat/index.md
@docs/03-fine-tuning/index.md
@docs/04-ide-integration/index.md
@docs/06-rag-database/index.md
@docs/02-strategic-architecture/index.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Chapter 5 hallucinated response examples</name>
  <files>docs/05-documentation-chat/index.md</files>
  <action>
Chapter 5 contains AI "response examples" that demonstrate what the documentation chat would output. These examples contain the same hallucinated `WINDOW CREATE` syntax. Fix all instances:

**Line 92 -- Note in default response:**
Current: `> *Note: If you are maintaining legacy Visual PRO/5 code, the older \`WINDOW CREATE\` verb is also supported.*`
Replace with: `> *Note: If you are maintaining legacy Visual PRO/5 code, the older mnemonic-based syntax (\`PRINT (sysgui)'WINDOW'(...)\`) is also supported.*`

**Lines 102-112 -- Legacy context detection response example:**
Current response says "you create windows using the `WINDOW CREATE` verb" and shows:
```bbj
WINDOW CREATE wnd_id, @(0,0), 80, 24, "My Application"
```
Replace the entire response block with correct Visual PRO/5 mnemonic syntax:

> In Visual PRO/5, you create windows by opening a SYSGUI device and sending mnemonic strings:
>
> ```bbj
> sysgui = unt
> open (sysgui)"X0"
> print (sysgui)'window'(100,100,400,300,"My Application",$00010003$,$00000000$)
> ```
>
> The parameters are: x position, y position, width, height, title, flags, and event mask. The SYSGUI channel must be opened first with `open (sysgui)"X0"`.
>
> *Source: [Visual PRO/5 GUI Mnemonic Reference]*

Also update line 110: `*Source: [Visual PRO/5 WINDOW CREATE reference]*` to `*Source: [Visual PRO/5 GUI Mnemonic Reference]*`

**Line 118 -- Query analysis description:**
Current: `implicit signals (verb-style syntax like \`WINDOW CREATE\` vs. object-style syntax like \`addWindow()\`)`
Replace with: `implicit signals (mnemonic-style syntax like \`PRINT (sysgui)'WINDOW'(...)\` vs. object-style syntax like \`addWindow()\`)`

**VERIFY CORRECT CODE (no changes needed):**
- Lines 83-86: The modern BBj example (`sysgui! = BBjAPI().getSysGui()` / `window! = sysgui!.addWindow(100, 100, 800, 600, "My Application")`) is CORRECT. Do not modify.
  </action>
  <verify>
1. `grep -n "WINDOW CREATE" docs/05-documentation-chat/index.md` returns zero matches
2. `grep -n "print (sysgui)" docs/05-documentation-chat/index.md` returns matches in the corrected legacy response example
3. The modern BBj example at lines 83-86 is unchanged and correct
4. `npm run build` succeeds
  </verify>
  <done>
Chapter 5 AI response examples use correct Visual PRO/5 mnemonic syntax. The modern BBj code example is verified correct and unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix generation tables and references in Chapters 2, 3, 4, 6, and verify Chapter 7</name>
  <files>docs/03-fine-tuning/index.md, docs/04-ide-integration/index.md, docs/06-rag-database/index.md, docs/02-strategic-architecture/index.md</files>
  <action>
Fix all remaining hallucinated `WINDOW CREATE` references across Chapters 2, 3, 4, 6, and verify Chapters 4 and 7.

**Chapter 3 (`docs/03-fine-tuning/index.md`):**

Line 55 -- Generation tagging table vpro5 row:
Current: `| \`"vpro5"\` | Visual PRO/5 (1990s) | \`WINDOW CREATE\`, \`BUTTON CREATE\`, \`CTRL()\` |`
Replace with: `| \`"vpro5"\` | Visual PRO/5 (1990s) | \`PRINT (sysgui)'WINDOW'(...)\`, \`PRINT (sysgui)'BUTTON'(...)\`, \`CTRL(sysgui,id,index)\` |`

VERIFY: The OrderForm class code block (lines 73-95) is CORRECT -- it uses proper BBj Custom Object syntax from the PDF. Do not modify.

**Chapter 6 (`docs/06-rag-database/index.md`):**

Line 142 -- Generation tagging table vpro5 row:
Current: `| \`"vpro5"\` | Visual PRO/5 (1990s) | \`WINDOW CREATE\`, \`BUTTON CREATE\`, \`CTRL()\` |`
Replace with: `| \`"vpro5"\` | Visual PRO/5 (1990s) | \`PRINT (sysgui)'WINDOW'(...)\`, \`PRINT (sysgui)'BUTTON'(...)\`, \`CTRL(sysgui,id,index)\` |`

Lines 188-201 -- JSON metadata example for legacy documentation:
Update the JSON to reflect correct syntax:
- Change `"verb": "WINDOW CREATE"` to `"verb": "PRINT (sysgui)'WINDOW'(...)"`
- Change the `"content"` field from `"Creates a GUI window using Visual PRO/5 syntax. WINDOW CREATE wnd_id, @(row,col), rows, cols, title$..."` to `"Creates a GUI window using Visual PRO/5 mnemonic syntax. print (sysgui)'window'(x,y,w,h,title$,flags$,eventmask$)..."`
- Change `"contextual_header": "Visual PRO/5 > GUI > WINDOW CREATE"` to `"contextual_header": "Visual PRO/5 > GUI > PRINT (sysgui)'WINDOW'(...)"`

Lines 214, 347, 492, 494, 496 -- All remaining `WINDOW CREATE` textual references:
- Line 214: Change `"Migrating from WINDOW CREATE"` to `"Migrating from PRINT (sysgui)'WINDOW'(...)"`
- Line 347: Change `WINDOW CREATE` to `PRINT (sysgui)'WINDOW'(...)`
- Lines 492-496: Update the fusion example to reference `PRINT (sysgui)'WINDOW'(...)` instead of `WINDOW CREATE`

**Chapter 4 (`docs/04-ide-integration/index.md`):**

Line 173: Change `Suggesting a \`WINDOW CREATE\` verb in DWC code` to `Suggesting a \`PRINT (sysgui)'WINDOW'(...)\` mnemonic in DWC code`

Line 198: The TypeScript detection code `if (hasStatement(ast, 'WINDOW CREATE'))` -- this is illustrative pseudocode showing what the parser would detect. Update to: `if (hasStatement(ast, "PRINT (sysgui)'WINDOW'"))` and update the signal name on line 199 from `'vpro5:window-verb'` to `'vpro5:window-mnemonic'`.

Line 263: Change `Do NOT suggest Visual PRO/5 verbs (WINDOW CREATE)` to `Do NOT suggest Visual PRO/5 mnemonics (PRINT (sysgui)'WINDOW'(...))`

**Chapter 2 (`docs/02-strategic-architecture/index.md`):**

Line 151: Change `A developer editing a 1990s Visual PRO/5 module receives \`WINDOW CREATE\` suggestions` to `A developer editing a 1990s Visual PRO/5 module receives \`PRINT (sysgui)'WINDOW'(...)\` suggestions`

**Chapter 7 (`docs/07-implementation-roadmap`):**
Verify: Check for any `WINDOW CREATE` or `BUTTON CREATE` references. Based on prior grep, there are none -- confirm and document as verified.

IMPORTANT: When editing the generation tagging tables, maintain the markdown table alignment. The longer replacement strings may need column width adjustments.
  </action>
  <verify>
1. `grep -rn "WINDOW CREATE" docs/02-strategic-architecture/ docs/03-fine-tuning/ docs/04-ide-integration/ docs/06-rag-database/ docs/07-implementation-roadmap/` returns zero matches
2. `grep -rn "BUTTON CREATE" docs/02-strategic-architecture/ docs/03-fine-tuning/ docs/04-ide-integration/ docs/06-rag-database/ docs/07-implementation-roadmap/` returns zero matches
3. `grep -rn "PRINT (sysgui)" docs/03-fine-tuning/index.md docs/06-rag-database/index.md` returns matches in corrected tables
4. The OrderForm class in Chapter 3 is unchanged
5. `npm run build` succeeds
  </verify>
  <done>
All remaining chapters are corrected:
- Generation tagging tables in Chapters 3 and 6 list correct mnemonic syntax for Visual PRO/5
- Chapter 4 detection code and descriptions use correct patterns
- Chapter 6 JSON metadata examples use correct syntax
- Chapter 2 narrative description is corrected
- Chapter 7 verified as having no BBj code issues
- Chapter 3 OrderForm code verified correct (unchanged)
- Site builds successfully
  </done>
</task>

</tasks>

<verification>
1. Run a project-wide search: `grep -rn "WINDOW CREATE" docs/` -- should return matches ONLY in Chapter 1's "Generic LLM Problem" section (where it correctly describes what LLMs hallucinate) and nowhere else
2. Run: `grep -rn "BUTTON CREATE" docs/` -- same criteria
3. Run: `npm run build` -- site builds without errors
4. Confirm the Chapter 3 OrderForm and Chapter 5 modern BBj examples are untouched and correct
</verification>

<success_criteria>
- All generation tagging tables across Chapters 3 and 6 describe Visual PRO/5 with correct mnemonic syntax
- Chapter 5 AI response examples use correct Visual PRO/5 patterns
- Chapter 4 detection code references correct patterns
- Chapter 2 narrative matches corrected syntax
- All existing correct code blocks verified as unchanged
- Site builds cleanly
- Zero hallucinated `WINDOW CREATE` / `BUTTON CREATE` syntax remains outside of the hallucination-description context in Chapter 1
</success_criteria>

<output>
After completion, create `.planning/phases/06-code-corrections/06-02-SUMMARY.md`
</output>
