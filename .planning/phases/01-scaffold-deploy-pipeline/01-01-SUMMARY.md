---
phase: 01-scaffold-deploy-pipeline
plan: 01
subsystem: infra
tags: [docusaurus, rspack, github-pages, typescript, react]

# Dependency graph
requires: []
provides:
  - "Buildable Docusaurus 3.9.2 project with Rspack acceleration"
  - "7-chapter folder structure with autogenerated sidebar"
  - "Custom landing page with chapter overview cards"
  - "GitHub Pages deployment config (baseUrl, trailingSlash, .nojekyll)"
affects: [01-02-github-actions-deploy, 02-foundation-content, 03-prism-syntax]

# Tech tracking
tech-stack:
  added: ["@docusaurus/core@3.9.2", "@docusaurus/faster@3.9.2", "@docusaurus/preset-classic@3.9.2", "react@19", "prism-react-renderer", "clsx"]
  patterns: ["autogenerated sidebar from folder structure", "_category_.json for sidebar ordering", "CSS modules for page styling"]

key-files:
  created:
    - "docusaurus.config.ts"
    - "sidebars.ts"
    - "package.json"
    - "tsconfig.json"
    - "src/pages/index.tsx"
    - "src/pages/index.module.css"
    - "src/css/custom.css"
    - "docs/01-bbj-challenge/_category_.json"
    - "docs/01-bbj-challenge/index.md"
    - "docs/02-strategic-architecture/_category_.json"
    - "docs/02-strategic-architecture/index.md"
    - "docs/03-fine-tuning/_category_.json"
    - "docs/03-fine-tuning/index.md"
    - "docs/04-ide-integration/_category_.json"
    - "docs/04-ide-integration/index.md"
    - "docs/05-documentation-chat/_category_.json"
    - "docs/05-documentation-chat/index.md"
    - "docs/06-rag-database/_category_.json"
    - "docs/06-rag-database/index.md"
    - "docs/07-implementation-roadmap/_category_.json"
    - "docs/07-implementation-roadmap/index.md"
    - "static/.nojekyll"
  modified: []

key-decisions:
  - "Used Docusaurus numberPrefix stripping (default behavior) -- doc IDs exclude numeric folder prefix (e.g., bbj-challenge/index not 01-bbj-challenge/index)"
  - "Migrated onBrokenMarkdownLinks from deprecated top-level config to markdown.hooks.onBrokenMarkdownLinks for v4 compatibility"
  - "Removed scaffold HomepageFeatures component, blog content, tutorial docs, and markdown example page"

patterns-established:
  - "Chapter folders use NN-slug format (01-bbj-challenge) for filesystem ordering, but Docusaurus strips the prefix for URLs and doc IDs"
  - "_category_.json provides sidebar label, position, and doc link for each chapter category"
  - "Each chapter index.md has sidebar_position: 1, title, description frontmatter, teaser content, and Coming Soon admonition"

# Metrics
duration: 7min
completed: 2026-01-31
---

# Phase 01 Plan 01: Docusaurus Scaffold Summary

**Docusaurus 3.9.2 scaffold with Rspack-accelerated builds, 7-chapter autogenerated sidebar, GitHub Pages config, and custom landing page with chapter overview cards**

## Performance

- **Duration:** 7 min
- **Started:** 2026-01-31T03:58:47Z
- **Completed:** 2026-01-31T04:05:33Z
- **Tasks:** 2/2
- **Files modified:** 36

## Accomplishments

- Scaffolded Docusaurus 3.9.2 classic-typescript project with @docusaurus/faster (Rspack) enabled
- Configured for GitHub Pages deployment: baseUrl `/bbj-ai-strategy/`, trailingSlash false, .nojekyll present
- Created all 7 chapter folders with _category_.json sidebar config and index.md placeholder content
- Built custom landing page with hero section, about blurb, and responsive chapter card grid
- Verified `npm run build` completes with zero errors

## Task Commits

Each task was committed atomically:

1. **Task 1: Scaffold Docusaurus and configure for GitHub Pages with Rspack** - `168d5d0` (feat)
2. **Task 2: Create 7-chapter folder structure and customize landing page** - `61b0e5d` (feat)

## Files Created/Modified

- `docusaurus.config.ts` - Site config with GitHub Pages settings, Rspack, blog disabled
- `sidebars.ts` - Autogenerated sidebar keyed as strategySidebar
- `package.json` - Project dependencies including @docusaurus/faster
- `tsconfig.json` - TypeScript config extending @docusaurus/tsconfig
- `src/pages/index.tsx` - Custom landing page with hero and chapter cards
- `src/pages/index.module.css` - Landing page styles with responsive grid
- `src/css/custom.css` - Infima CSS variable overrides (Docusaurus default)
- `docs/01-bbj-challenge/_category_.json` + `index.md` - Chapter 1: The BBj Challenge
- `docs/02-strategic-architecture/_category_.json` + `index.md` - Chapter 2: Strategic Architecture
- `docs/03-fine-tuning/_category_.json` + `index.md` - Chapter 3: Fine-Tuning the Model
- `docs/04-ide-integration/_category_.json` + `index.md` - Chapter 4: IDE Integration
- `docs/05-documentation-chat/_category_.json` + `index.md` - Chapter 5: Documentation Chat
- `docs/06-rag-database/_category_.json` + `index.md` - Chapter 6: RAG Database Design
- `docs/07-implementation-roadmap/_category_.json` + `index.md` - Chapter 7: Implementation Roadmap
- `static/.nojekyll` - GitHub Pages Jekyll bypass (from scaffold template)
- `.gitignore` - Node/Docusaurus ignores

## Decisions Made

- **numberPrefix stripping (default):** Docusaurus strips numeric prefixes from folder names for doc IDs and URLs. Folders are `01-bbj-challenge` on disk but `bbj-challenge` in URLs. _category_.json IDs must use the stripped form.
- **onBrokenMarkdownLinks migration:** The research config had `onBrokenMarkdownLinks` at the top level, which is deprecated in v4. Moved to `markdown.hooks.onBrokenMarkdownLinks` to eliminate the deprecation warning.
- **Removed all scaffold defaults:** Deleted blog/, tutorial docs, HomepageFeatures component, and markdown-page.md to start clean.

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Created temporary docs/index.md for Task 1 build verification**
- **Found during:** Task 1 (build verification)
- **Issue:** Docusaurus requires at least one doc file to build. After removing scaffold tutorial docs, docs/ was empty and build failed with "Docs version current has no docs"
- **Fix:** Created minimal docs/index.md placeholder. Removed in Task 2 when chapter folders were added.
- **Files modified:** docs/index.md (created then deleted)
- **Verification:** Build passed after adding placeholder
- **Committed in:** 168d5d0 (Task 1 commit)

**2. [Rule 1 - Bug] Fixed broken landing page link to /docs/intro**
- **Found during:** Task 1 (build verification)
- **Issue:** Scaffold index.tsx linked to /docs/intro which no longer existed after removing tutorial docs. Build failed with "Broken link on source page path"
- **Fix:** Replaced scaffold landing page with minimal version linking to /docs instead of /docs/intro. Full landing page created in Task 2.
- **Files modified:** src/pages/index.tsx
- **Verification:** Build passed with zero broken links
- **Committed in:** 168d5d0 (Task 1 commit)

**3. [Rule 1 - Bug] Fixed deprecated onBrokenMarkdownLinks config**
- **Found during:** Task 1 (build verification)
- **Issue:** Build produced deprecation warning: "siteConfig.onBrokenMarkdownLinks config option is deprecated and will be removed in Docusaurus v4"
- **Fix:** Moved from top-level `onBrokenMarkdownLinks: 'warn'` to `markdown: { hooks: { onBrokenMarkdownLinks: 'warn' } }`
- **Files modified:** docusaurus.config.ts
- **Verification:** Build passes without deprecation warning
- **Committed in:** 168d5d0 (Task 1 commit)

**4. [Rule 1 - Bug] Fixed _category_.json doc IDs for numberPrefix stripping**
- **Found during:** Task 2 (build verification)
- **Issue:** _category_.json files referenced `01-bbj-challenge/index` etc., but Docusaurus strips the numeric prefix by default. Build failed with "Can't find any doc with ID 01-bbj-challenge/index"
- **Fix:** Updated all 7 _category_.json files to use stripped IDs (e.g., `bbj-challenge/index`). Updated landing page hrefs to match.
- **Files modified:** All 7 _category_.json files, src/pages/index.tsx
- **Verification:** Build passed with all 7 chapters in sidebar
- **Committed in:** 61b0e5d (Task 2 commit)

---

**Total deviations:** 4 auto-fixed (3 bugs, 1 blocking)
**Impact on plan:** All auto-fixes necessary for correct build. No scope creep. The plan's research correctly identified the config patterns but missed the numberPrefix stripping behavior affecting doc IDs.

## Issues Encountered

- Rspack deprecation warning about `experiments.lazyBarrel` appears during builds. This is upstream from Rspack and cosmetic only -- does not affect build output. No action needed.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Docusaurus project builds successfully and is ready for GitHub Actions deployment (Plan 01-02)
- All 7 chapter folders are in place, ready for content writing in Phase 2+
- Landing page and sidebar structure are complete
- The `build/` output directory is ready to be uploaded as a GitHub Pages artifact

---
*Phase: 01-scaffold-deploy-pipeline*
*Completed: 2026-01-31*
